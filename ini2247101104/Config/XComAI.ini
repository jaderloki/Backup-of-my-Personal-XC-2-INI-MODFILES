;;---------------------------------------------------------------------------------------
;;  FILE:    XComAI.ini
;;  PURPOSE: Enemy AI Behavior
;;---------------------------------------------------------------------------------------
[XComGame.XComGameState_AIGroup]
+FallbackExclusionList="Banshee"
+FallbackExclusionList="ReaperBanshee"

[XComGame.X2AIBTBehaviorTree]
+EquivalentAbilities=(KeyName=StandardMelee, EquivalentAbilityName[0]=BansheeSlash) 

; -------------------- Banshee -----------------------------------------------
+Behaviors=(BehaviorName="Banshee::CharacterRoot", NodeType=Selector, Child[0]=TryJobUnsafe, Child[1]=GenericGreenMovement, Child[2]=BansheeHeatSeekProtocol, Child[3]=BansheeRedAlert, Child[4]=GenericAlertHandler)
+Behaviors=(BehaviorName=BansheeRedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BansheeRedAbilitySelector)
+Behaviors=(BehaviorName=BansheeRedAbilitySelector, NodeType=Selector, Child[0]=MimicBeaconBehavior, Child[1]=BansheeRedFirstAction, Child[2]=BansheeRedLastAction)

+Behaviors=(BehaviorName=BansheeRedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BansheeFirstActionSelector);
+Behaviors=(BehaviorName=BansheeFirstActionSelector, NodeType=Selector, \\
	Child[0]=TryBansheeFaithBreaker, \\
	Child[1]=TryBansheeSlash, \\
	Child[2]=MoveMeleeFANATICUnsafe, \\
	Child[3]=HuntEnemyUnsafe)

+Behaviors=(BehaviorName=BansheeRedLastAction, NodeType=Selector, \\
	Child[0]=TryBansheeFaithBreaker, \\
	Child[1]=TryBansheeSlash, \\
	Child[2]=MoveMeleeFANATICUnsafe, \\
	Child[3]=HuntEnemyUnsafe)

+Behaviors=(BehaviorName="Banshee::AttackMimicBeacon", NodeType=Sequence, Child[0]=TryBansheeSlash)

+Behaviors=(BehaviorName=BansheeHeatSeekProtocol, NodeType=Sequence, Child[0]=BansheeShouldTriggerHeatSeek, Child[1]=SelectHeatSeekMove)
+Behaviors=(BehaviorName=BansheeShouldTriggerHeatSeek, NodeType=Selector, Child[0]=NoVisibleEnemies)

; ---------------- Scything Claws (Banshee) ----------------------------------
+Behaviors=(BehaviorName=SetTargetStack-BansheeSlash, NodeType=Action)
+Behaviors=(BehaviorName=HasValidTarget-BansheeSlash, NodeType=Condition)

; usage
+Behaviors=(BehaviorName=TryBansheeSlash, NodeType=Sequence, Child[0]=IsAbilityAvailable-BansheeSlash, Child[1]=SelectTargetForBansheeSlash, Child[2]=SelectAbility-BansheeSlash)
+Behaviors=(BehaviorName=TryBansheeFaithBreaker, NodeType=Sequence, Child[0]=IsAbilityAvailable-FaithBreaker, Child[1]=HasDamagedVisibleEnemies, Child[2]=MultipleValidTargetsRemain, Child[3]=SelectAbility-FaithBreaker)

; targeting
+Behaviors=(BehaviorName=SelectTargetForBansheeSlash, NodeType=Selector, Child[0]=BansheeSlash_HitIdealTarget, Child[1]=BansheeSlash_AnyTargetWillDo)
; BansheeSlashPrefTargetProfile attempts to restrict attack to include the ideal potential target. If that fails to find a target, just hit whatever.
+Behaviors=(BehaviorName=BansheeSlash_HitIdealTarget, NodeType=Sequence, Child[0]=SelectPotentialMeleeTarget, Child[1]=FindPotentialAoETargets-BansheeSlashPrefTargetProfile, Child[2]=SelectAoETarget-BansheeSlashPrefTargetProfile)
+Behaviors=(BehaviorName=BansheeSlash_AnyTargetWillDo, NodeType=Sequence, Child[0]=FindPotentialAoETargets-BansheeSlashProfile, Child[1]=SelectAoETarget-BansheeSlashProfile)
;Behaviors=(BehaviorName=SelectTargetForBansheeSlash, NodeType=Sequence, Child[0]=SelectPotentialMeleeTarget, Child[1]=FindPotentialAoETargets-BansheeSlashProfile, Child[2]=SelectAoETarget-BansheeSlashProfile)

+Behaviors=(BehaviorName=IsAbilityAvailable-BansheeSlash, NodeType=Condition)
+Behaviors=(BehaviorName=IsAbilityReady-BansheeSlash, NodeType=Condition)
+Behaviors=(BehaviorName=SelectAbility-BansheeSlash, NodeType=Action)
+Behaviors=(BehaviorName=FindPotentialAoETargets-BansheeSlashProfile, NodeType=Action)
+Behaviors=(BehaviorName=FindPotentialAoETargets-BansheeSlashPrefTargetProfile, NodeType=Action)
+Behaviors=(BehaviorName=SelectAoETarget-BansheeSlashProfile, NodeType=Action)
+Behaviors=(BehaviorName=SelectAoETarget-BansheeSlashPrefTargetProfile, NodeType=Action)

;+Behaviors=(BehaviorName=IsAbilityAvailable-BansheeFaithBreaker, NodeType=Condition)
+Behaviors=(BehaviorName=HasDamagedVisibleEnemies, NodeType=DLC2Condition, Param[0]=1); Param[0]= Minimum visible enemies to succeed.
;+Behaviors=(BehaviorName=SelectAbility-BansheeFaithBreaker, NodeType=Action)

[XComGame.XGAIBehavior]
AoERepeatAttackExclusionList="BansheeSlash"  ;Ignore BansheeSlash when avoiding attacks on the same AoE targets.  
AoEProfiles=( Profile=BansheeSlashPrefTargetProfile, Ability=BansheeSlash, bIgnoreSelfDamage=True, MinTargets=1, bRequirePotentialTarget=True)
AoEProfiles=( Profile=BansheeSlashProfile, Ability=BansheeSlash, bIgnoreSelfDamage=True, MinTargets=1)

