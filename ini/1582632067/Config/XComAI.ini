[XComGame.XComGameState_AIGroup]
+FallbackExclusionList="BLMarineM1"
+FallbackExclusionList="BLMarineM2"
+FallbackExclusionList="BLMarineM3"

+FallbackExclusionList="BLBerserkerM1"
+FallbackExclusionList="BLBerserkerM2"
+FallbackExclusionList="BLBerserkerM3"

+FallbackExclusionList="BLFlameMarineM1"
+FallbackExclusionList="BLFlameMarineM2"
+FallbackExclusionList="BLFlameMarineM3"

+FallbackExclusionList="BLMarineAssaultM1"
+FallbackExclusionList="BLMarineAssaultM2"
+FallbackExclusionList="BLMarineAssaultM3"

+FallbackExclusionList="BLCaptainM1"
+FallbackExclusionList="BLCaptainM2"
+FallbackExclusionList="BLCaptainM3"

+FallbackExclusionList="BLLordM1"
+FallbackExclusionList="BLLordM2"
+FallbackExclusionList="BLLordM3"

+FallbackExclusionList="BLRaptorM1"
+FallbackExclusionList="BLRaptorM2"
+FallbackExclusionList="BLRaptorM3"

+FallbackExclusionList="BLMarineMeltaM2"
+FallbackExclusionList="BLMarineMeltaM3"

+FallbackExclusionList="BLBerserkerMeltaM2"
+FallbackExclusionList="BLBerserkerMeltaM3"

+FallbackExclusionList="BLMarineAssaultMeltaM2"
+FallbackExclusionList="BLMarineAssaultMeltaM3"

+FallbackExclusionList="BLCaptainMeltaM2"
+FallbackExclusionList="BLCaptainMeltaM3"

+FallbackExclusionList="BLLordMeltaM2"
+FallbackExclusionList="BLLordMeltaM3"

+FallbackExclusionList="BLRaptorMeltaM2"
+FallbackExclusionList="BLRaptorMeltaM3"


[XComGame.X2AIBTBehaviorTree]

+EquivalentAbilities=(KeyName=CallBLReinforcements, EquivalentAbilityName[0]=CallBLReinforcementsM1, EquivalentAbilityName[1]=CallBLReinforcementsM2, EquivalentAbilityName[2]=CallBLReinforcementsM3)
+EquivalentAbilities=(KeyName=StandardMelee, EquivalentAbilityName[0]=ChaosAxeSlashM1, EquivalentAbilityName[1]=ChaosAxeSlashM2, EquivalentAbilityName[2]=ChaosAxeSlashM3, EquivalentAbilityName[3]=ChaosSwordSlashM1, EquivalentAbilityName[4]=ChaosSwordSlashM2, EquivalentAbilityName[5]=ChaosSwordSlashM3)
+EquivalentAbilities=( KeyName=Teleport, EquivalentAbilityName[0]=IcarusJump, EquivalentAbilityName[1]=BLRaptorJump )
+EquivalentAbilities=( KeyName=StandardShot, EquivalentAbilityName[0]=MeltaShot)


;-----------------BLACK LEGION LORD------------------
+Behaviors=(BehaviorName="BLLord::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BLLord_RedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BLLord_RedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BLLord_RedAbilitySelector)
+Behaviors=(BehaviorName=BLLord_RedAbilitySelector, NodeType=Selector, Child[0]=BLLord_RedFirstAction, Child[1]=BLLord_RedLastAction)

+Behaviors=(BehaviorName=BLLord_RedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BLLord_RedFirstActionSelector)
+Behaviors=(BehaviorName=BLLord_RedFirstActionSelector, NodeType=Selector, \\
    Child[0]=SelectMove_JobOrDefensive, \\
	Child[1]=DoIfFlankedMove, \\
	Child[2]=TryAllBLLordOptions, \\
	Child[3]=HuntEnemyWithCover)

+Behaviors=(BehaviorName=BLLord_RedLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=BLLord_RedLastActionSelector)
+Behaviors=(BehaviorName=BLLord_RedLastActionSelector, NodeType=Selector, \\
    Child[0]=TryAllBLLordOptions, \\
	Child[1]=SelectMove_JobOrDefensive, \\
	Child[2]=HuntEnemyWithCover)

+Behaviors=(BehaviorName=IsAbilityAvailable-CallBLReinforcements, NodeType=Condition)
+Behaviors=(BehaviorName=SelectAbility-CallBLReinforcements, NodeType=Action)

+Behaviors=(BehaviorName=TryCallBLReinforcements, NodeType=Sequence, Child[0]=IsAbilityAvailable-CallBLReinforcements, Child[1]=IsAloneOrWithOneAlly, Child[2]=MultipleEnemiesVisible, Child[3]=SelectAbility-CallBLReinforcements)	
+Behaviors=(BehaviorName=IsAloneOrWithOneAlly, NodeType=StatCondition, Param[0]=VisibleAllyCount, Param[1]="<=", Param[2]=1)

;Black Legion Lord Rapid Fire
+Behaviors=(BehaviorName=TryRapidFire, NodeType=Sequence, Child[0]=IsAbilityAvailable-RapidFire, Child[1]=SelectTargetFor_RapidFire, Child[2]=SelectAbility-RapidFire)
+Behaviors=(BehaviorName=SelectTargetFor_RapidFire, NodeType=Sequence, Child[0]=SetTargetStack-RapidFire, Child[1]=GenericSelectBestTarget, Child[2]=HasValidTarget-RapidFire)
+Behaviors=(BehaviorName=IsAbilityAvailable-RapidFire, NodeType=Condition)
+Behaviors=(BehaviorName=SelectAbility-RapidFire, NodeType=Action)
+Behaviors=(BehaviorName=SetTargetStack-RapidFire, NodeType=Action)
+Behaviors=(BehaviorName=HasValidTarget-RapidFire, NodeType=Condition)

+Behaviors=(BehaviorName=TryAllBLLordOptions, NodeType=RandSelector, Child[0]=TryRapidFire, Param[0]=20, Child[1]=TryCallBLReinforcements, Param[1]=20, Child[2]=TryShootOrReloadOrOverwatch, Param[2]=20, Child[3]=TryMarkTargetOption, Param[3]=20, Child[4]=AdvCaptainTryMoveThenGrenade, Param[4]=20 )


; --------------------BLACK LEGION MARINE AI  ------------
+Behaviors=(BehaviorName="BlackLegionMarine::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BlackLegionMarine_RedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BlackLegionMarine_RedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BlackLegionMarine_RedAbilitySelector)
+Behaviors=(BehaviorName=BlackLegionMarine_RedAbilitySelector, NodeType=Selector, Child[0]=BlackLegionMarineRedFirstAction, Child[1]=BlackLegionMarineRedLastAction)

+Behaviors=(BehaviorName=BlackLegionMarineRedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BlackLegionMarineRedFirstActionSelector)
+Behaviors=(BehaviorName=BlackLegionMarineRedFirstActionSelector, NodeType=Selector, \\
	Child[0]=TryMoveThenGrenade, \\
	Child[1]=SelectMove_JobOrAggressive, \\
	Child[2]=DoIfFlankedMove, \\
	Child[3]=TryShootOrReloadOrOverwatch, \\
	Child[4]=HuntEnemyWithCover)

+Behaviors=(BehaviorName=BlackLegionMarineRedLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=BlackLegionMarineRedLastActionSelector)
+Behaviors=(BehaviorName=BlackLegionMarineRedLastActionSelector, NodeType=Selector, \\
	Child[0]=TryGrenade, \\
	Child[1]=TryShootOrReloadOrOverwatch, \\
	Child[2]=HuntEnemyWithCover, \\
	Child[3]=SelectMove_JobOrAggressive)


; ----------------BLACK LEGION HAVOC FLAME MARINE------------------
+Behaviors=(BehaviorName="BlackLegionFlameMarine::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BlackLegionFlameMarineRedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BlackLegionFlameMarineRedAlert, NodeType=Sequence, Child[0]=IsRedOrOrangeAlert, Child[1]=SelectBlackLegionFlameMarineAbility)
+Behaviors=(BehaviorName=SelectBlackLegionFlameMarineAbility, NodeType=Selector,\\
			Child[0]=SelectPreselectedAbility, \\
			Child[1]=FlameThrowerPriorityOption, \\
			Child[2]=TryMoveThenFlameThrower, \\
			Child[3]=TryFlankedMoveThenFlameThrower,\\
			Child[4]=DoIfFlankedMove, \\
			Child[5]=TryShootOrReloadOrOverwatch, \\
			Child[6]=HuntEnemyWithCover)




;-------------------------BLACK LEGION CAPTAIN -----------------
+Behaviors=(BehaviorName="BlackLegionCaptain::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BlackLegionCaptain_RedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BlackLegionCaptain_RedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BlackLegionCaptain_RedAbilitySelector)
+Behaviors=(BehaviorName=BlackLegionCaptain_RedAbilitySelector, NodeType=Selector, Child[0]=BlackLegionCaptain_RedFirstAction, Child[1]=BlackLegionCaptain_RedLastAction)

+Behaviors=(BehaviorName=BlackLegionCaptain_RedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BlackLegionCaptain_RedFirstActionSelector)
+Behaviors=(BehaviorName=BlackLegionCaptain_RedFirstActionSelector, NodeType=Selector, \\
    Child[0]=DoIfFlankedMove, \\
	Child[1]=SelectMove_JobOrDefensive, \\
	Child[2]=TryAnkleShot_BL, \\
	Child[3]=TryMoveThenGrenade, \\
	Child[4]=TryShootOrReloadOrOverwatch, \\
	Child[5]=HuntEnemyWithCover)

+Behaviors=(BehaviorName=BlackLegionCaptain_RedLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=BlackLegionCaptain_RedLastActionSelector)
+Behaviors=(BehaviorName=BlackLegionCaptain_RedLastActionSelector, NodeType=Selector, \\
	Child[0]=TryShootOrReloadOrOverwatch, \\
	Child[1]=TryGrenade, \\
	Child[2]=TryAnkleShot_BL, \\
	Child[3]=HuntEnemyWithCover, \\
	Child[4]=SelectMove_JobOrDefensive)

;New Scamper Root
+Behaviors=(BehaviorName=ScamperRoot_BlackLegion, NodeType=Selector, \\
        Child[0]=TryShootOrMoveOption, \\ 
		Child[1]=CounterBeaglerushManeuver, \\
		Child[2]=MoveDefensiveWithLoSUnsafe, \\
		Child[3]=MoveStandardUnsafe, \\
		Child[4]=SkipMove)

; 30% chance to try standard shot, 70% chance to move to cover.  Otherwise use whatever is available.
+Behaviors=(BehaviorName=TryShootOrMoveOption, NodeType=RandSelector, Child[0]=TryStandaredShot, Param[0]=20, Child[1]=FallBackWithLoSUnsafe, Param[1]=80 )


+Behaviors=(BehaviorName=HasValidTarget-AnkleShot_BL, NodeType=Condition)
+Behaviors=(BehaviorName=SetTargetStack-AnkleShot_BL, NodeType=Action)
+Behaviors=(BehaviorName=IsAbilityAvailable-AnkleShot_BL, NodeType=Condition)
+Behaviors=(BehaviorName=IsAbilityReady-AnkleShot_BL, NodeType=Condition)
+Behaviors=(BehaviorName=SelectAbility-AnkleShot_BL, NodeType=Action)

+Behaviors=(BehaviorName=SelectTargetForAnkleShot_BL, NodeType=Sequence, \\
	Child[0]=SetTargetStack-AnkleShot_BL, \\
	Child[1]=GenericSelectBestTarget, \\
	Child[2]=HasValidTarget-AnkleShot_BL)

+Behaviors=(BehaviorName=TryAnkleShot_BL, NodeType=Sequence, \\
	Child[0]=IsAbilityAvailable-AnkleShot_BL, \\
	Child[1]=SelectTargetForAnkleShot_BL, \\
	Child[2]=SelectAbility-AnkleShot_BL)

; --------------------BLACK LEGION BERSERKER  ------------
+Behaviors=(BehaviorName="BLBerserker::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BLBerserker_RedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BLBerserker_RedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BLBerserker_RedAbilitySelector)
+Behaviors=(BehaviorName=BLBerserker_RedAbilitySelector, NodeType=Selector, Child[0]=BLBerserker_RedFirstAction, Child[1]=BLBerserker_RedLastAction)

+Behaviors=(BehaviorName=BLBerserker_RedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BLBerserker_RedFirstActionSelector)
+Behaviors=(BehaviorName=BLBerserker_RedFirstActionSelector, NodeType=Selector, \\
	Child[0]=TryStandardMelee, \\
	Child[1]=SelectMove_JobOrAggressive, \\
	Child[2]=DoIfFlankedMove, \\
	Child[3]=TryShootOrReloadOrOverwatch, \\
	Child[4]=HuntEnemyWithCover)
	

+Behaviors=(BehaviorName=BLBerserker_RedLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=BLBerserker_RedLastActionSelector)
+Behaviors=(BehaviorName=BLBerserker_RedLastActionSelector, NodeType=Selector, \\
	Child[0]=TryStandardMelee, \\
	Child[1]=TryShootOrReloadOrOverwatch, \\
	Child[2]=HuntEnemyWithCover, \\
	Child[3]=SelectMove_JobOrAggressive)


;; --------------------BLACK LEGION RAPTOR  ------------
+Behaviors=(BehaviorName="BLRaptor::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BLRaptor_RedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BLRaptor_RedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BLRaptor_RedAbilitySelector)
+Behaviors=(BehaviorName=BLRaptor_RedAbilitySelector, NodeType=Selector, Child[0]=BLRaptorRedFirstAction, Child[1]=BLRaptorRedLastAction)

+Behaviors=(BehaviorName=BLRaptorRedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BLRaptorRedFirstActionSelector)
+Behaviors=(BehaviorName=BLRaptorRedFirstActionSelector, NodeType=Selector, \\
	Child[0]=DoIfFlankedMove, \\
	Child[1]=TryTeleportDefensive, \\
	Child[2]=MoveOffensive, \\
	Child[3]=TryShootOrReloadOrOverwatch,\\
	Child[4]=HuntEnemyWithCover)

+Behaviors=(BehaviorName=BLRaptorRedLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=BLRaptorRedLastActionSelector)
+Behaviors=(BehaviorName=BLRaptorRedLastActionSelector, NodeType=Selector, \\
	Child[0]=TryShootOrReloadOrOverwatch, \\
	Child[1]=DoIfFlankedMove, \\
	Child[2]=MoveDefensive, \\
	Child[3]=HuntEnemyWithCover)

;New Scamper Root
+Behaviors=(BehaviorName=ScamperRoot_BlackLegionRaptor, NodeType=Selector, \\
        Child[0]=TryShootOrJumpOrMoveOption, \\ 
		Child[1]=CounterBeaglerushManeuver, \\
		Child[2]=MoveOffensiveWithLoSUnsafe, \\
		Child[3]=MoveStandardUnsafe, \\
		Child[4]=SkipMove)

; 40% chance to jump to Offensive position, 10% chance to try standard shot, 30% chance to move to cover.  Otherwise use whatever is available.
+Behaviors=(BehaviorName=TryShootOrJumpOrMoveOption, NodeType=RandSelector, Child[0]=TryTeleportDefensive, Param[0]=40, Child[1]=TryStandaredShot, Param[1]=20, Child[2]=MoveOffensiveWithLoSUnsafe, Param[2]=40 )

; --------------------BLACK LEGION MARINE ASSAULT AI  ------------
+Behaviors=(BehaviorName="BlackLegionMarineAssault::CharacterRoot", NodeType=Selector, Child[0]=TryJob, Child[1]=GenericGreenMovement, Child[2]=BlackLegionMarineAssault_RedAlert, Child[3]=GenericAlertHandler)
+Behaviors=(BehaviorName=BlackLegionMarineAssault_RedAlert, NodeType=Sequence, Child[0]=IsRedAlert, Child[1]=BlackLegionMarineAssault_RedAbilitySelector)
+Behaviors=(BehaviorName=BlackLegionMarineAssault_RedAbilitySelector, NodeType=Selector, Child[0]=BlackLegionMarineAssaultRedFirstAction, Child[1]=BlackLegionMarineAssaultRedLastAction)

+Behaviors=(BehaviorName=BlackLegionMarineAssaultRedFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=BlackLegionMarineAssaultRedFirstActionSelector)
+Behaviors=(BehaviorName=BlackLegionMarineAssaultRedFirstActionSelector, NodeType=Selector, \\
	Child[0]=TryMoveThenGrenade, \\
	Child[1]=SelectMove_JobOrAggressive, \\
	Child[2]=TryStandardMelee, \\
	Child[3]=DoIfFlankedMove, \\
	Child[4]=TryShootOrReloadOrOverwatch, \\
	Child[5]=HuntEnemyWithCover)

+Behaviors=(BehaviorName=BlackLegionMarineAssaultRedLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=BlackLegionMarineAssaultRedLastActionSelector)
+Behaviors=(BehaviorName=BlackLegionMarineAssaultRedLastActionSelector, NodeType=Selector, \\
	Child[0]=TryGrenade, \\
	Child[1]=TryStandardMelee, \\
	Child[2]=TryShootOrReloadOrOverwatch, \\
	Child[3]=HuntEnemyWithCover, \\
	Child[4]=SelectMove_JobOrAggressive)