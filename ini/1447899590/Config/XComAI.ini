; Let's teach Militia to hunker, use grenades and suppression
; Nothing fancy, we'll just use already existing AI routines and fit them into the action selectors.
; Note: Intentionally left out any ABAI features so the mod can be used standalone.

[XComGame.X2AIBTBehaviorTree]

-Behaviors=(BehaviorName=CivilianMilitiaFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=CivilianMilitiaFirstActionSelector)
+Behaviors=(BehaviorName=CivilianMilitiaFirstAction, NodeType=Sequence, Child[0]=NotLastActionPoint, Child[1]=CivilianMilitiaFirstActionSelector_ABM)

-Behaviors=(BehaviorName=CivilianMilitiaLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=CivilianMilitiaLastActionSelector)
+Behaviors=(BehaviorName=CivilianMilitiaLastAction, NodeType=Sequence, Child[0]=IsLastActionPoint, Child[1]=CivilianMilitiaLastActionSelector_ABM)

+Behaviors=(BehaviorName=RandSuppress50, NodeType=RandFilter, Child[0]=SuppressIfAvailable, Param[0]=50)
+Behaviors=(BehaviorName=RandOverwatch50, NodeType=RandFilter, Child[0]=TryOverwatch, Param[0]=50)

+Behaviors=(BehaviorName=HunkerWhenEnemiesAround, NodeType=Sequence, Child[0]=AnyLivingEnemyVisible, Child[1]=DoCower)

+Behaviors=(BehaviorName=CivilianMilitiaFirstActionSelector_ABM, NodeType=Selector, \\
	Child[0]=CivilianMilitiaMoveIfNeedCover, \\
	Child[1]=TryMoveThenGrenade, \\
	Child[2]=RandSuppress50, \\
	Child[3]=RandOverwatch50, \\
	Child[4]=TryShootOrReload, \\
	Child[5]=MilitiaMoveTowardValidTargets, \\
	Child[6]=HunkerWhenEnemiesAround, \\
	Child[7]=SkipMove)

+Behaviors=(BehaviorName=CivilianMilitiaLastActionSelector_ABM, NodeType=Selector, \\
	Child[0]=TryGrenade, \\
	Child[1]=RandSuppress50, \\
	Child[2]=RandOverwatch50, \\
	Child[3]=TryShootOrReload, \\
	Child[4]=HunkerWhenEnemiesAround, \\
	Child[5]=SkipMove)



